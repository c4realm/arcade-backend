{% extends 'base.html' %}

{% block title %}Arcade - Learn Together, Grow Together{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="gradient-bg text-white rounded-2xl shadow-xl mb-12 overflow-hidden">
    <div class="container mx-auto px-4 py-16">
        <div class="text-center">
            <h1 class="text-4xl md:text-5xl font-bold mb-6">
                Learn from Peers,<br>Not Just Professors
            </h1>
            <p class="text-xl mb-8 max-w-2xl mx-auto">
                Arcade connects learners with community experts. 
                Share knowledge, build skills, and grow together in our peer-to-peer learning ecosystem.
            </p>
            <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-6">
                <a href="/courses" 
                   class="bg-white text-purple-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors">
                    <i class="fas fa-book-open mr-2"></i>Browse Courses
                </a>
                <a href="/register" 
                   class="bg-transparent border-2 border-white text-white px-8 py-3 rounded-lg font-semibold hover:bg-white hover:text-purple-600 transition-colors">
                    <i class="fas fa-rocket mr-2"></i>Start Teaching
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="mb-12">
    <h2 class="text-3xl font-bold text-center mb-10 text-gray-800">Why Choose Arcade?</h2>
    
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <div class="bg-white p-6 rounded-xl shadow-md text-center">
            <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fas fa-users text-purple-600 text-2xl"></i>
            </div>
            <h3 class="text-xl font-semibold mb-3">Community Driven</h3>
            <p class="text-gray-600">Learn from real practitioners, not just theory. Get practical insights from peers who've been there.</p>
        </div>
        
        <div class="bg-white p-6 rounded-xl shadow-md text-center">
            <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fas fa-graduation-cap text-green-600 text-2xl"></i>
            </div>
            <h3 class="text-xl font-semibold mb-3">Flexible Learning</h3>
            <p class="text-gray-600">Free and paid courses. Learn at your own pace with video, text, and interactive materials.</p>
        </div>
        
        <div class="bg-white p-6 rounded-xl shadow-md text-center">
            <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fas fa-comments text-blue-600 text-2xl"></i>
            </div>
            <h3 class="text-xl font-semibold mb-3">Study Groups</h3>
            <p class="text-gray-600">Join study groups, chat with classmates, and collaborate on projects together.</p>
        </div>
    </div>
</section>

<!-- Recent Courses Section -->
<section class="mb-12">
    <div class="flex justify-between items-center mb-6">
        <h2 class="text-2xl font-bold text-gray-800">Recently Added Courses</h2>
        <a href="/courses" class="text-purple-600 hover:text-purple-800 font-semibold">
            View All <i class="fas fa-arrow-right ml-1"></i>
        </a>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="courses-container">
        <!-- Courses will be loaded dynamically with JavaScript -->
        <div class="text-center py-12">
            <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"></div>
            <p class="text-gray-600">Loading courses...</p>
        </div>
    </div>
</section>

<!-- JavaScript to load courses -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Load courses from API
        fetch('/api/v1/courses/')
            .then(response => response.json())
            .then(courses => {
                const container = document.getElementById('courses-container');
                
                if (courses.length === 0) {
                    container.innerHTML = `
                        <div class="col-span-3 text-center py-12">
                            <i class="fas fa-book-open text-5xl text-gray-300 mb-4"></i>
                            <h3 class="text-xl font-semibold text-gray-600">No courses yet</h3>
                            <p class="text-gray-500 mt-2">Be the first to create a course!</p>
                            <a href="/register" class="inline-block mt-4 bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700">
                                Get Started
                            </a>
                        </div>
                    `;
                    return;
                }
                
                // Show first 6 courses
                const recentCourses = courses.slice(0, 6);
                container.innerHTML = recentCourses.map(course => `
                    <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-shadow course-card">
                        <div class="p-6">
                            <div class="flex justify-between items-start mb-4">
                                <div>
                                    <span class="inline-block px-3 py-1 text-xs font-semibold rounded-full 
                                        ${course.is_paid ? 'bg-green-100 text-green-800' : 'bg-blue-100 text-blue-800'}">
                                        ${course.is_paid ? `$${course.price}` : 'FREE'}
                                    </span>
                                    <span class="ml-2 inline-block px-3 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800">
                                        ${course.level}
                                    </span>
                                </div>
                                ${course.is_featured ? '<span class="text-yellow-500"><i class="fas fa-star"></i></span>' : ''}
                            </div>
                            
                            <h3 class="text-xl font-semibold text-gray-800 mb-2 line-clamp-2">${course.title}</h3>
                            <p class="text-gray-600 mb-4 line-clamp-3">${course.description}</p>
                            
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mr-2">
                                        <i class="fas fa-user text-purple-600 text-sm"></i>
                                    </div>
                                    <span class="text-sm text-gray-600">${course.creator_name || 'Instructor'}</span>
                                </div>
                                <div class="text-sm text-gray-500">
                                    <i class="fas fa-clock mr-1"></i> ${course.estimated_hours || 'N/A'}h
                                </div>
                            </div>
                            
                            <a href="/courses/${course.id}" 
                               class="block w-full text-center bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700 transition-colors">
                                <i class="fas fa-eye mr-2"></i> View Course
                            </a>
                        </div>
                    </div>
                `).join('');
            })
            .catch(error => {
                console.error('Error loading courses:', error);
                document.getElementById('courses-container').innerHTML = `
                    <div class="col-span-3 text-center py-12">
                        <i class="fas fa-exclamation-triangle text-3xl text-red-500 mb-4"></i>
                        <p class="text-red-600">Unable to load courses. Please try again later.</p>
                    </div>
                `;
            });
    });
</script>
{% endblock %}
